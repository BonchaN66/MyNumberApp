# 🧪 EmployeeService 単体テスト設計書

本書は **`EmployeeService`** クラスの単体テスト設計をまとめたドキュメントです。  
Spring Boot アプリケーションにおける Service 層ロジックの妥当性を、  
Mockito によるリポジトリモックを通じて検証しています。

---

## 📁 対象クラス

| 対象                          | パッケージ               |
| ----------------------------- | ------------------------ |
| **EmployeeService**           | `com.bonchan.service`    |
| **EmployeeRepository (Mock)** | `com.bonchan.repository` |

---

## 🧱 テスト環境構成

| 項目                     | 内容                                  |
| ------------------------ | ------------------------------------- |
| **テストフレームワーク** | JUnit 5 (`org.junit.jupiter`)         |
| **モックライブラリ**     | Mockito (`org.mockito`)               |
| **テスト構造**           | 単体テスト（Repository 層をモック化） |
| **テスト対象メソッド**   | CRUD・重複チェック・日付登録など      |

---

## 🧩 テストデータ共通化

すべてのテストで共通メソッド `createEmployee(Long id, String code, String name, String myNumber)` を使用。  
重複コードを排除し、テスト内容の可読性を向上。

---

## ✅ 正常系テスト一覧

| テスト名                   | 対象メソッド        | 目的                                                             |
| -------------------------- | ------------------- | ---------------------------------------------------------------- |
| `getAllEmployees()`        | `getAllEmployees()` | 登録済み社員データをすべて取得できることを確認                   |
| `findById_found()`         | `findById()`        | 指定 ID の社員が正しく返却されることを確認                       |
| `registerSuccess()`        | `register()`        | 重複がない新規登録が正常に成功し、登録日時が設定されることを確認 |
| `updateSuccess()`          | `updateEmployee()`  | 既存社員の情報が正しく更新されることを確認                       |
| `deleteById_callsDelete()` | `deleteById()`      | Repository の削除メソッドが正しく呼ばれることを確認              |

---

## ⚠️ 異常系テスト一覧

| テスト名                      | 対象メソッド       | 目的                                                       |
| ----------------------------- | ------------------ | ---------------------------------------------------------- |
| `updateNotFound()`            | `updateEmployee()` | 更新対象が存在しない場合に `"NOT_FOUND"` を返すことを確認  |
| `registerDuplicateCode()`     | `register()`       | 社員コードが重複している場合に登録が拒否されることを確認   |
| `registerDuplicateMyNumber()` | `register()`       | マイナンバーが重複している場合に登録が拒否されることを確認 |

---

## 🧠 コメント構成ルール

各テストでは統一された 3 ステップ構成で可読性を確保。

| 日本語表現 | 英語表現 | 目的                         |
| ---------- | -------- | ---------------------------- |
| **前準備** | _Given_  | テストに必要な初期状態を設定 |
| **実行**   | _When_   | テスト対象メソッドを呼び出し |
| **確認**   | _Then_   | 戻り値・副作用の検証を実施   |

---
